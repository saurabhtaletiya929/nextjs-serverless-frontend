#import "~/components/Price/_price_range.graphql"

query ProductQuery($filters: ProductAttributeFilterInput!) {
  storeConfig {
    id
    product_url_suffix 
  }
  products(filter: $filters) {
    items {
      id
      attribute_set_id
      name
      sku
      __typename
      price_range{
        minimum_price{
          regular_price{
            value
            currency
          }
        }
      }
      categories {
        id
      }
      ... on ConfigurableProduct {
        configurable_options {
          id
          attribute_id_v2
          label
          position
          use_default
          attribute_code
          values {
            value_index
            label
          }
          product_id
        }
        variants {
          product {
            id
            name
            sku
            attribute_set_id
            ... on PhysicalProductInterface {
              weight
            }
            price_range{
              minimum_price{
                regular_price{
                  value
                  currency
                }
              }
            }
          }
          attributes {
            uid
            label
            code
            value_index
          }
        }
        reviews{
        items{
          summary
          text
          nickname
          created_at
          average_rating
          ratings_breakdown{
            name
            value
          }
        }
      }
      description {
        html
      }
        related_products {
        uid
        name
        url_key
        media_gallery {
        id: url
        label
        url
        type: __typename
      }
        thumbnail {
        id: url
        url
        label
      }
        image {
          disabled
          label
          position
          url
        }
      }
      media_gallery {
          url
          label
          ... on ProductImage {
            id: url
            label
            url
            type: __typename
          }
          ... on ProductVideo {
              video_content {
                  media_type
                  video_provider
                  video_url
                  video_title
                  video_description
                  video_metadata
              }
          }
      }
      price_range {
        ...price_range
      }
      }
    }
  }
}